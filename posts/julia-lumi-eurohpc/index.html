<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="Content-Language" content="en">
  <meta name="color-scheme" content="light dark">

  

  <meta name="author" content="GPU4GEO">
  <meta name="description" content="GPU4GEO project website">
  <meta name="keywords" content="GPU,Earth-sciences,Supercomputing">


  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="GPU4GEO">
  <meta name="twitter:description" content="GPU4GEO project website">

  <meta property="og:title" content="summary">
  <meta property="og:description" content="GPU4GEO project website">
  <meta property="og:type" content="website">

  <title>GPU4GEO</title>

  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/fork-awesome@1.2.0/css/fork-awesome.min.css" integrity="sha256-XoaMnoYC5TH6/+ihMEnospgm0J1PM/nioxbOUdnM8HY=" crossorigin="anonymous">
  <link rel="stylesheet" href="/GPU4GEO/css/coder.min.css" media="screen">
  <link rel="stylesheet" href="/GPU4GEO/css/coder-dark.min.css" media="screen">
  <link rel="stylesheet" href="/GPU4GEO/css/my_style.css" media="screen">

  <link rel="icon" type="image/png" href="/GPU4GEO/assets/images/favicon-32x32.png" sizes="32x32">
  <link rel="icon" type="image/png" href="/GPU4GEO/assets/images/favicon-16x16.png" sizes="16x16">

  <link rel="apple-touch-icon" href="/GPU4GEO/assets/images/apple-touch-icon.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/GPU4GEO/assets/images/apple-touch-icon.png">

  
  <meta name="generator" content="Franklin.jl" />

  

  
    <link rel="stylesheet" href="/GPU4GEO/libs/highlight/github.min.css">
  

  <style>
  :root {
    --block-background: #f4f0ec;
  }
  .hljs {
    padding: 1em;
  }
  </style>

</head>

<body class="preload-transitions colorscheme-auto">

  <div class="float-container">
    <a id="dark-mode-toggle" class="colorscheme-toggle">
      <i class="fa fa-adjust fa-fw" aria-hidden="true"></i>
    </a>
  </div>

  <main class="wrapper ">

  <main class="wrapper">

    <nav class="navigation">
  <section class="container">

    <a class="navigation-title" href="/GPU4GEO/">
      GPU4GEO
    </a>

    <input type="checkbox" id="menu-toggle">
    <label class="menu-button float-right" for="menu-toggle">
      <i class="fa fa-bars fa-fw" aria-hidden="true"></i>
    </label>

    <ul class="navigation-list">
      
        <li class="navigation-item">
          <a class="navigation-link" href="/GPU4GEO/project/">Project</a>
        </li>
      
        <li class="navigation-item">
          <a class="navigation-link" href="/GPU4GEO/posts/">News</a>
        </li>
      
        <li class="navigation-item">
          <a class="navigation-link" href="/GPU4GEO/software/">Software</a>
        </li>
      
        <li class="navigation-item">
          <a class="navigation-link" href="/GPU4GEO/team/">Team</a>
        </li>
      
        <li class="navigation-item">
          <a class="navigation-link" href="/GPU4GEO/stream/">STREAM project</a>
        </li>
      
        <li class="navigation-item">
          <a class="navigation-link" href="/GPU4GEO/publications/">Publications</a>
        </li>
      

      
      
    </ul>

  </section>
</nav>


    <div class="content">

        
        <section class="container post">
          <header>
  <div class="post-title">
    <h1 class="title">
      <a class="title-link" href="/GPU4GEO/posts/julia-lumi-eurohpc/index.html">
        AMDGPU on LUMI - The STREAM project submission
      </a>
    </h1>
  </div>

  <div class="post-meta">
    
      <div class="date">
        <span class="posted-on">
          <i class="fa fa-calendar" aria-hidden="true"></i>
          <time datetime='2022-12-08'>
            December 8, 2022
          </time>
        </span>

        
          <span class="reading-time">
            <i class="fa fa-clock-o" aria-hidden="true"></i>
            3-minute read
          </span>
        
      </div>
    

    
      <div class="tags">
        <i class="fa fa-tag" aria-hidden="true"></i>
        <span class="tag"><a href="/GPU4GEO/tags/julia/">julia</a></span><span class="separator">•</span><span class="tag"><a href="/GPU4GEO/tags/amdgpu/">amdgpu</a></span><span class="separator">•</span><span class="tag"><a href="/GPU4GEO/tags/proposal/">proposal</a></span>
      </div>
    
    </div>
  </header>


       
       
       
<p>The <a href="https://github.com/JuliaGPU/AMDGPU.jl">AMDGPU.jl</a> implementation of the thermomechanical ice flow solvers <a href="https://github.com/PTsolvers/FastIce.jl">FastIce.jl</a> achieves ideal weak scalability on 512 AMD MI250x GPUs on 64 LUMI-G nodes. The scaling tests were realised in the scope of a EuroHPC Extreme Scale Access submission - the STREAM project.</p>
<h2 id="fastice.jl_on_amd_gpus_on_lumi_g" > FastIce.jl on AMD GPUs on LUMI-G<a class="heading-link" href="#fastice.jl_on_amd_gpus_on_lumi_g">
  <i class="fa fa-link" aria-hidden="true"></i>
</a>
</h2><p><em>Ludovic Räss</em></p>
<p>The <a href="https://eurohpc-ju.europa.eu/eurohpc-ju-call-proposals-extreme-scale-access-mode-open-2022-09-28_en">European High Performance Computing Joint Undertaking (EuroHPC JU)</a> launched a call to access its pre-exascale supercomputers. A GPU4GEO team composed of Ludovic Räss (ETHZ), Ivan Utkin (ETHZ) and Julian Samaroo (MIT JuliaLab) submitted the STREAM project within this EuroHPC call, to investigate SponTaneous REArrangment of ice Motion (STREAM).</p>
<blockquote><p>The main scientific advances of this EuroHPC allocation will be to understand whether an internal shear band can spontaneously form in ice flowing over rough topography resulting in englacial sliding with the aim of providing a more accurate prediction of surface flow velocities over Greenland.</p>
</blockquote><p>Regarding the technical aspects, preparing the data for the call application permitted to tune AMDGPU.jl for running on LUMI-G's MI250x GPUs "at scale".</p>
<blockquote><p>The main technical advances of this EuroHPC allocation aim to set a milestone running our Julia HPC application on the latest AMD GPUs at pre-exascale on Europe’s fastest supercomputer, LUMI-G.</p>
</blockquote><p>We achieve a parallel efficiency of 97% during weak scaling tests on up to 512 MI250x AMD GPUs on the LUMI-G EAP partition (64 nodes):</p>
<img src="../../assets/images/lumi_weak_scale_Teff.png" alt="weak scalability on LUMI-G" width="600"><p>The key ingredient to achieve this ideal weak scalability relies in successfully overlapping ROCm-aware MPI communication with stencil computations. We use HSA custom kernel signal management and define priority on execution queues to schedule asynchronous kernel launch. The result is that MPI communication and send / receive buffer copies overlap with kernel execution as depicted in the figure below (highlighted by the red box):</p>
<img src="../../assets/images/8procs.png" alt="weak scalability on LUMI-G" width="900"><p>The kernel execution timeline is produced using <code>rocprof</code> tool and visualised using the chrome tracing utility.</p>


      </section>
    </div>

    <footer class="footer">
      <section class="container">
        © 2022 GPU4GEO · Powered by
  <a href="https://franklin.jl">Franklin.jl</a> &
  <a href="https://github.com/luizdepra/hugo-coder/">Coder</a>.
      </section>
    </footer>

  </main>

  

  
    <script src="/GPU4GEO/libs/highlight/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();hljs.configure({tabReplace: '    '});</script>
  

<script src="/GPU4GEO/libs/coder.min.js"></script>

</body>
</html>
